<stack:stack>

	<stack:description>
	These scripts are executed after AutoYaST has completed the system
	configuration and after it has booted the system for the first time.
		
	These scripts only work SLES 11 and SLES 12 backend nodes -- they
	*don't* work on CasSP backend nodes.
	</stack:description>
  
	<stack:copyright>
	(c) 2006 - 2016 StackIQ Inc.
	All rights reserved. stacki(r) v3.0 www.stacki.com
	</stack:copyright>

<stack:script stack:stage="boot-pre">
/opt/stack/bin/stacki-status.py install post-scripts
</stack:script>

<stack:script stack:stage="boot-pre">
<stack:report name="host.interface">&hostname;</stack:report>
<stack:report name="host.route">&hostname;</stack:report>
<stack:report name="host.resolv">&hostname;</stack:report>

#
# the above command (report host resolv) writes /etc/resolv.conf. make sure
# YaST doesn't overwrite it
#

awk '/NETCONFIG_DNS_POLICY/ { \
	printf("NETCONFIG_DNS_POLICY=\"\"\n"); \
	next; \
} \
{ print $0 }' /etc/sysconfig/network/config &gt; /tmp/config

cp /tmp/config /etc/sysconfig/network/config

</stack:script>

</stack:stack> 

